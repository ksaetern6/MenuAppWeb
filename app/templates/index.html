<html>
<head>
    <header><title>Index Header Title</title></header>
</head>
    <body>
        <p>Hello World from Index</p>
        <button id="load">load</button>
        <p id="first-p"></p>
        <img id = 'myimg' src="">

        <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
            
        <!-- Add Firebase products that you want to use -->
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script> 
        <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-storage.js"></script>
        <script>
                // Your web app's Firebase configuration
                var firebaseConfig = {
                    apiKey: 'AIzaSyBMNp1j4Di3OaHlGPXJ9LuRvXMPAeMmcro',
                    authDomain: "menuapp-f3764.firebaseapp.com",
                    databaseURL: "https://menuapp-f3764.firebaseio.com",
                    projectId: "menuapp-f3764",
                    storageBucket: "menuapp-f3764.appspot.com",
                    messagingSenderId: "77920760117",
                    appId: "1:77920760117:web:67cf1a4799eb73e064dc7c",
                    measurementId: "G-33NWQZKM7W"
                };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                var db = firebase.firestore();
                var storage = firebase.storage();
                var storageRef = storage.ref('sandwich.jpg');
                gs://menuapp-f3764.appspot.com/sandwich.jpg
                storageRef.getDownloadURL().then(function(url) {
                    var img = document.getElementById('myimg');
                    img.src = url;
                })
                console.log("firebase initialized");
                
                const pHeader = document.querySelector("#first-p");
                const loadBtn = document.querySelector("#load");
                const docRef = db.doc("Restaurants/E2zVURqnFMjg9t6bkfYs");
                
                loadBtn.addEventListener("click",function(){
                    docRef.get().then(function(doc) {
                        if(doc && doc.exists) {
                            const myData = doc.data();
                            pHeader.innerHTML = myData.test;
                        }
                    })
                })
        </script>

        <script>
            console.log("hello world");
            initApp = function() {
                firebase.auth().onAuthStateChanged(function(user) {
                    if(!user){
                       window.location.href=("/login");
                    }
                }, function(error){
                    console.log(error);
                })
            }
            window.addEventListener('load', function() {
                initApp();
                });
        </script>
    </body>
</html>